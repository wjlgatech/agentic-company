{
  "run_id": "8f25c26b",
  "artifacts": [
    {
      "type": "test",
      "filename": "test_community_intelligence.py",
      "content": "# test_community_intelligence.py\nimport pytest\nimport asyncio\nfrom unittest.mock import Mock, patch, AsyncMock\nfrom community_intelligence import CommunityIntelligence, Community, Influencer\n\nclass TestCommunityIntelligence:\n    \n    @pytest.fixture\n    def intelligence(self):\n        return CommunityIntelligence()\n    \n    def test_init(self, intelligence):\n        \"\"\"Test CommunityIntelligence initialization.\"\"\"\n        assert intelligence.communities == []\n        assert intelligence.influencers == []\n    \n    @pytest.mark.asyncio\n    async def test_research_communities(self, intelligence):\n        \"\"\"Test community research functionality.\"\"\"\n        communities = await intelligence.research_communities()\n        \n        assert len(communities) >= 2\n        assert all(isinstance(c, Community) for c in communities)\n        \n        # Test first community data\n        reddit_community = communities[0]\n        assert reddit_community.name == \"r/solopreneur\"\n        assert reddit_community.platform == \"Reddit\"\n        assert reddit_community.member_count == 150000\n        assert reddit_community.engagement_rate == 4.2\n        assert len(reddit_community.optimal_posting_times) == 3\n        assert len(reddit_community.trending_topics) >= 1\n        assert len(reddit_community.key_hashtags) >= 1\n    \n    @pytest.mark.asyncio\n    async def test_identify_influencers(self, intelligence):\n        \"\"\"Test influencer identification functionality.\"\"\"\n        influencers = await intelligence.identify_influencers()\n        \n        assert len(influencers) >= 2\n        assert all(isinstance(i, Influencer) for i in influencers)\n        \n        # Test first influencer data\n        influencer = influencers[0]\n        assert influencer.username == \"pieter_levels\"\n        assert influencer.platform == \"Twitter\"\n        assert influencer.follower_count == 180000\n        assert influencer.engagement_rate == 3.5\n        assert influencer.niche == \"indie_hacking\"\n        assert influencer.partnership_status in [\"potential\", \"contacted\", \"partnered\"]\n    \n    @pytest.mark.asyncio\n    async def test_get_engagement_metrics(self, intelligence):\n        \"\"\"Test engagement metrics calculation.\"\"\"\n        await intelligence.research_communities()\n        await intelligence.identify_influencers()\n        \n        metrics = intelligence.get_engagement_metrics()\n        \n        assert \"total_reach\" in metrics\n        assert \"average_engagement_rate\" in metrics\n        assert \"communities_mapped\" in metrics\n        assert \"influencers_identified\" in metrics\n        \n        assert metrics[\"total_reach\"] > 0\n        assert metrics[\"average_engagement_rate\"] > 0\n        assert metrics[\"communities_mapped\"] >= 2\n        assert metrics[\"influencers_identified\"] >= 2\n    \n    def test_community_dataclass(self):\n        \"\"\"Test Community dataclass validation.\"\"\"\n        community = Community(\n            name=\"Test Community\",\n            platform=\"TestPlatform\",\n            member_count=1000,\n            engagement_rate=5.0,\n            optimal_posting_times=[\"9:00 AM\"],\n            trending_topics=[\"test\"],\n            key_hashtags=[\"#test\"]\n        )\n        \n        assert community.name == \"Test Community\"\n        assert community.member_count == 1000\n        assert community.engagement_rate == 5.0\n    \n    def test_influencer_dataclass(self):\n        \"\"\"Test Influencer dataclass validation.\"\"\"\n        influencer = Influencer(\n            username=\"test_user\",\n            platform=\"TestPlatform\",\n            follower_count=5000,\n            engagement_rate=3.0,\n            niche=\"test_niche\",\n            contact_info=\"test@example.com\",\n            partnership_status=\"potential\"\n        )\n        \n        assert influencer.username == \"test_user\"\n        assert influencer.follower_count == 5000\n        assert influencer.partnership_status == \"potential\"\n    \n    def test_edge_cases_empty_data(self, intelligence):\n        \"\"\"Test edge cases with empty data.\"\"\"\n        # Test metrics with no data\n        metrics = intelligence.get_engagement_metrics()\n        assert metrics[\"communities_mapped\"] == 0\n        assert metrics[\"influencers_identified\"] == 0\n    \n    @pytest.mark.asyncio\n    async def test_error_handling(self, intelligence):\n        \"\"\"Test error handling in async methods.\"\"\"\n        with patch('community_intelligence.CommunityIntelligence.research_communities') as mock_research:\n            mock_research.side_effect = Exception(\"API Error\")\n            \n            with pytest.raises(Exception):\n                await intelligence.research_communities()",
      "language": "python",
      "metadata": {
        "extracted_from": "code_block",
        "index": 0
      },
      "created_at": "2026-02-15T21:18:18.252683"
    },
    {
      "type": "test",
      "filename": "test_content_strategy.py",
      "content": "# test_content_strategy.py\nimport pytest\nfrom datetime import datetime, timedelta\nfrom content_strategy import ContentStrategy, ContentPost\n\nclass TestContentStrategy:\n    \n    @pytest.fixture\n    def strategy(self):\n        return ContentStrategy()\n    \n    def test_init(self, strategy):\n        \"\"\"Test ContentStrategy initialization.\"\"\"\n        assert strategy.content_calendar == []\n        assert strategy.demo_scenarios == []\n    \n    def test_create_content_calendar(self, strategy):\n        \"\"\"Test content calendar creation.\"\"\"\n        calendar = strategy.create_content_calendar()\n        \n        assert len(calendar) >= 2  # At least 2 days of content\n        assert all(isinstance(post, ContentPost) for post in calendar)\n        \n        # Test first post\n        first_post = calendar[0]\n        assert first_post.platform in [\"Twitter\", \"LinkedIn\", \"TikTok\", \"Reddit\"]\n        assert len(first_post.content) > 0\n        assert len(first_post.hashtags) >= 1\n        assert len(first_post.engagement_hooks) >= 1\n        assert len(first_post.cta) > 0\n        assert isinstance(first_post.posting_time, datetime)\n    \n    def test_create_demo_scenarios(self, strategy):\n        \"\"\"Test demo scenarios creation.\"\"\"\n        scenarios = strategy.create_demo_scenarios()\n        \n        assert len(scenarios) >= 3\n        assert all(isinstance(scenario, dict) for scenario in scenarios)\n        \n        # Test first scenario\n        first_scenario = scenarios[0]\n        required_keys = [\"title\", \"business_type\", \"duration\", \"script\", \"viral_hooks\", \"platforms\"]\n        for key in required_keys:\n            assert key in first_scenario\n        \n        assert first_scenario[\"title\"] == \"E-commerce Store in 10 Minutes\"\n        assert first_scenario[\"business_type\"] == \"e-commerce\"\n        assert len(first_scenario[\"viral_hooks\"]) >= 1\n        assert len(first_scenario[\"platforms\"]) >= 1\n    \n    def test_get_platform_variants(self, strategy):\n        \"\"\"Test platform-specific content variants.\"\"\"\n        base_content = \"This is a test content for platform variants\"\n        \n        twitter_variant = strategy.get_platform_variants(base_content, \"Twitter\")\n        linkedin_variant = strategy.get_platform_variants(base_content, \"LinkedIn\")\n        tiktok_variant = strategy.get_platform_variants(base_content, \"TikTok\")\n        reddit_variant = strategy.get_platform_variants(base_content, \"Reddit\")\n        \n        assert \"\ud83e\uddf5\" in twitter_variant\n        assert \"\ud83d\udcbc\" in linkedin_variant\n        assert \"#fyp\" in tiktok_variant\n        assert \"Discussion:\" in reddit_variant\n        \n        # Test unknown platform\n        unknown_variant = strategy.get_platform_variants(base_content, \"UnknownPlatform\")\n        assert unknown_variant == base_content\n    \n    def test_content_post_dataclass(self):\n        \"\"\"Test ContentPost dataclass validation.\"\"\"\n        post_time = datetime.now()\n        post = ContentPost(\n            platform=\"Twitter\",\n            content=\"Test content\",\n            media_type=\"text\",\n            posting_time=post_time,\n            hashtags=[\"#test\"],\n            engagement_hooks=[\"hook1\"],\n            cta=\"Click here\",\n            community_variant=\"test\"\n        )\n        \n        assert post.platform == \"Twitter\"\n        assert post.content == \"Test content\"\n        assert post.posting_time == post_time\n        assert len(post.hashtags) == 1\n    \n    def test_content_calendar_chronological_order(self, strategy):\n        \"\"\"Test that content calendar is in chronological order.\"\"\"\n        calendar = strategy.create_content_calendar()\n        \n        if len(calendar) > 1:\n            for i in range(1, len(calendar)):\n                assert calendar[i].posting_time >= calendar[i-1].posting_time\n    \n    def test_demo_scenarios_variety(self, strategy):\n        \"\"\"Test that demo scenarios cover different business types.\"\"\"\n        scenarios = strategy.create_demo_scenarios()\n        business_types = [scenario[\"business_type\"] for scenario in scenarios]\n        \n        # Should have variety in business types\n        unique_types = set(business_types)\n        assert len(unique_types) >= 2\n        \n        # Should include key business types\n        expected_types = [\"e-commerce\", \"service\", \"creator\"]\n        for expected_type in expected_types:\n            assert expected_type in business_types\n    \n    def test_edge_cases_long_content(self, strategy):\n        \"\"\"Test edge cases with long content.\"\"\"\n        long_content = \"A\" * 500  # Very long content\n        twitter_variant = strategy.get_platform_variants(long_content, \"Twitter\")\n        \n        # Twitter variant should be truncated\n        assert len(twitter_variant) < len(long_content)\n        assert \"\ud83e\uddf5\" in twitter_variant\n    \n    def test_content_hooks_effectiveness(self, strategy):\n        \"\"\"Test that content has effective engagement hooks.\"\"\"\n        calendar = strategy.create_content_calendar()\n        \n        for post in calendar:\n            # Each post should have engagement hooks\n            assert len(post.engagement_hooks) > 0\n            \n            # Content should contain some hook elements\n            content_lower = post.content.lower()\n            hook_indicators = [\"what if\", \"here's\", \"watch\", \"\ud83d\ude80\", \"\ud83d\udcbc\", \"thread\", \"\ud83e\uddf5\"]\n            has_hook = any(indicator in content_lower for indicator in hook_indicators)\n            assert has_hook, f\"Post missing engagement hooks: {post.content[:50]}...\"",
      "language": "python",
      "metadata": {
        "extracted_from": "code_block",
        "index": 1
      },
      "created_at": "2026-02-15T21:18:18.252748"
    }
  ],
  "created_at": "2026-02-15T21:18:18.252800",
  "metadata": {},
  "stats": {
    "count": 2,
    "total_size_bytes": 10098,
    "total_lines": 248
  }
}